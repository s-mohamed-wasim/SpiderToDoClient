<div class="tasks-container">
    <!-- Top bar with toggle only -->
    <div class="tasks-header">
        <mat-button-toggle-group [(ngModel)]="selectedTab" aria-label="Task filter" class="status-toggle">
            <mat-button-toggle value="Pending">Pending</mat-button-toggle>
            <mat-button-toggle value="Completed">Completed</mat-button-toggle>
        </mat-button-toggle-group>
    </div>

    <!-- Task List -->
    <div class="tasks-list">
        @for (task of filteredTasks; track task.taskId) {
        <mat-card class="task-card" appearance="outlined">
            <div class="task-row">

                <!-- Left: Checkbox -->
                <div class="task-left">
                    <mat-checkbox [checked]="task.status === 'Completed'" color="primary" (change)="toggleTaskStatus(task)"></mat-checkbox>
                </div>

                <!-- Middle: Task details -->
                <div class="task-middle">
                    <h3 class="task-title" [class.completed]="task.status === 'Completed'">
                        {{ task.title }}
                    </h3>

                    @if (task.description) {
                    <p class="task-desc" [class.completed]="task.status === 'Completed'">
                        {{ task.description }}
                    </p>
                    }

                    <div class="task-dates">
                        <span class="date-label">Created:</span>
                        <span>{{ task.createdDate | date: 'dd-MMM-yyyy' }}</span>
                    </div>
                </div>


                <!-- Right: Actions -->
                <div class="task-right">
                    <button mat-icon-button class="edit-btn" (click)="editTask(task.taskId)" aria-label="Edit">
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button class="delete-btn" (click)="deleteTask(task.taskId)" aria-label="Delete">
                        <mat-icon>delete</mat-icon>
                    </button>
                </div>

            </div>
        </mat-card>
        }

        @if (filteredTasks.length === 0) {
        <div class="no-tasks">
            <mat-icon>inbox</mat-icon>
            <p>No {{ selectedTab }} tasks found</p>
        </div>
        }
    </div>

    <!-- Floating Action Button -->
    <button mat-fab color="primary" class="fab" (click)="addTask()">
        <mat-icon>add</mat-icon>
    </button>
</div>